[gd_scene format=3 uid="uid://ied1f8r2pef8"]

[ext_resource type="Script" uid="uid://bvb23f5st7o0l" path="res://main.gd" id="1_o5qli"]
[ext_resource type="PackedScene" uid="uid://cbcu0aholnfmm" path="res://scenes/player.tscn" id="2_85g3d"]
[ext_resource type="Script" uid="uid://cgt7c7b72ukrj" path="res://scripts/resources/item_resource.gd" id="2_gqmmt"]
[ext_resource type="Script" uid="uid://dhko0a4d0m02f" path="res://scripts/furniture_resource.gd" id="2_yc10j"]
[ext_resource type="Resource" uid="uid://cbs2q2lqlgpsg" path="res://resources/items/chair.tres" id="3_yc10j"]
[ext_resource type="Resource" uid="uid://dvn3do5lgj4ps" path="res://resources/items/plant.tres" id="4_2wyq8"]
[ext_resource type="Resource" uid="uid://do8pxnae1qlob" path="res://resources/items/shelf.tres" id="4_y6deb"]
[ext_resource type="Resource" uid="uid://bonocppwahuaq" path="res://resources/items/table.tres" id="5_vxglm"]
[ext_resource type="Resource" uid="uid://dfvnacwxpg6sh" path="res://resources/furnitures/long-table.tres" id="6_0ld40"]
[ext_resource type="Resource" uid="uid://ggspwnr42ukk" path="res://resources/furnitures/shelf.tres" id="7_jscy8"]
[ext_resource type="PackedScene" uid="uid://bt5jkavy5b063" path="res://scenes/furniture.tscn" id="9_85g3d"]
[ext_resource type="Resource" uid="uid://b17f37vkk17l7" path="res://resources/furnitures/chair.tres" id="9_eb6dy"]
[ext_resource type="Texture2D" uid="uid://bpst3jprjdgnt" path="res://sprites/furnitures/chair.png" id="9_ya4ey"]
[ext_resource type="Texture2D" uid="uid://dojtpumlg4e1" path="res://sprites/furnitures/plant.png" id="10_eb6dy"]
[ext_resource type="Shader" uid="uid://qjm6tlg3d4rd" path="res://scenes/wobble.gdshader" id="10_trceg"]
[ext_resource type="Texture2D" uid="uid://008dek1vy7ia" path="res://sprites/canvas.png" id="11_a8y0u"]
[ext_resource type="PackedScene" uid="uid://dmlxdc460lr65" path="res://scenes/uis/inventory_slot.tscn" id="11_jscy8"]
[ext_resource type="Script" uid="uid://ccf62ey38eegj" path="res://scripts/uis/inventory.gd" id="11_pm3ni"]
[ext_resource type="Resource" uid="uid://cdlorjnvm638q" path="res://resources/furnitures/plant.tres" id="11_trceg"]
[ext_resource type="Resource" uid="uid://fgutpxw1p1hy" path="res://resources/furnitures/tv.tres" id="12_dp3eg"]
[ext_resource type="Texture2D" uid="uid://crj472xqe4c1s" path="res://sprites/FlowMap.png" id="12_jkv2x"]
[ext_resource type="Texture2D" uid="uid://cugnqeo3ko4rt" path="res://sprites/furnitures/tv.png" id="13_0ld40"]
[ext_resource type="Texture2D" uid="uid://ccu73j3mwkvis" path="res://sprites/coin.png" id="13_jbj1t"]
[ext_resource type="FontFile" uid="uid://n0g47af416mr" path="res://Gaegu-Bold.ttf" id="14_a8y0u"]
[ext_resource type="Resource" uid="uid://bua33vgc77fgh" path="res://resources/furnitures/bed.tres" id="14_gqmmt"]
[ext_resource type="Texture2D" uid="uid://ckcuxde7qd5v7" path="res://sprites/furnitures/bed.png" id="15_yc10j"]
[ext_resource type="Resource" uid="uid://dny05aaapfdpd" path="res://resources/items/bed.tres" id="15_yq6so"]
[ext_resource type="Resource" uid="uid://cajni2hosui3k" path="res://resources/items/long-table.tres" id="16_fv21b"]
[ext_resource type="Resource" uid="uid://bb14w6g27j6qa" path="res://resources/items/tv.tres" id="17_tel4y"]

[sub_resource type="AtlasTexture" id="AtlasTexture_jkv2x"]
atlas = ExtResource("13_jbj1t")
region = Rect2(10, 9, 46, 44)

[sub_resource type="LabelSettings" id="LabelSettings_jbj1t"]
font = ExtResource("14_a8y0u")
font_size = 64

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_85g3d"]
vertex_color_use_as_albedo = true

[sub_resource type="QuadMesh" id="QuadMesh_choun"]
material = SubResource("StandardMaterial3D_85g3d")
size = Vector2(100, 100)

[sub_resource type="ViewportTexture" id="ViewportTexture_ya4ey"]
viewport_path = NodePath("World/PlayerCanvas/SubViewport")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_muem4"]
shader = ExtResource("10_trceg")
shader_parameter/texture_albedo = ExtResource("11_a8y0u")
shader_parameter/texture_flow_map = ExtResource("12_jkv2x")
shader_parameter/color = Color(0.3647059, 0.3647059, 0.3647059, 1)
shader_parameter/displacement_steps = 4
shader_parameter/displacement_power = 2.0
shader_parameter/displacement_size = 5.0

[node name="Main" type="Node2D" unique_id=513818981 node_paths=PackedStringArray("coins_label", "inventory")]
script = ExtResource("1_o5qli")
coins_label = NodePath("CanvasLayer/Control/Control/CoinsLabel")
game_mode = 1
left_door_position = Vector2i(0, 3)
right_door_position = Vector2i(3, 0)
tile_size = Vector2(162, 78)
room_size = Vector2i(5, 4)
tile_offset = Vector2(0, 39)
window_count = 2
walls_color = Color(0.62890625, 0.62890625, 0.62890625, 1)
floor_color = Color(0.7, 0.48999998, 0.48999998, 1)
inventory_items = Array[ExtResource("2_gqmmt")]([ExtResource("4_y6deb"), ExtResource("4_2wyq8"), ExtResource("5_vxglm"), ExtResource("3_yc10j")])
inventory = NodePath("CanvasLayer/Inventory")
furniture_resources = Array[ExtResource("2_yc10j")]([ExtResource("9_eb6dy"), ExtResource("9_eb6dy"), ExtResource("11_trceg"), ExtResource("7_jscy8"), ExtResource("9_eb6dy"), ExtResource("9_eb6dy"), ExtResource("6_0ld40")])

[node name="CanvasLayer" type="CanvasLayer" parent="." unique_id=51444999]

[node name="Control" type="Control" parent="CanvasLayer" unique_id=593483237]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="Control" type="Control" parent="CanvasLayer/Control" unique_id=1830084040]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -196.0
offset_right = -16.0
offset_bottom = 76.0
grow_horizontal = 0

[node name="TextureRect" type="TextureRect" parent="CanvasLayer/Control/Control" unique_id=1232286375]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -46.0
offset_top = 12.0
offset_bottom = 56.0
grow_horizontal = 0
texture = SubResource("AtlasTexture_jkv2x")

[node name="CoinsLabel" type="Label" parent="CanvasLayer/Control/Control" unique_id=1098272423]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -144.0
offset_right = -49.0
offset_bottom = 65.0
grow_horizontal = 0
text = "123"
label_settings = SubResource("LabelSettings_jbj1t")
horizontal_alignment = 2

[node name="Inventory" type="Control" parent="CanvasLayer" unique_id=381616656 node_paths=PackedStringArray("inventory_slots_container")]
layout_mode = 3
anchors_preset = 9
anchor_bottom = 1.0
offset_right = 322.0
grow_vertical = 2
script = ExtResource("11_pm3ni")
inventory_slots_container = NodePath("InventorySlotsContainer")
inventory_size = 8
game_item_resources = Array[ExtResource("2_gqmmt")]([ExtResource("15_yq6so"), ExtResource("3_yc10j"), ExtResource("16_fv21b"), ExtResource("4_2wyq8"), ExtResource("4_y6deb"), ExtResource("5_vxglm"), ExtResource("17_tel4y")])

[node name="InventorySlotsContainer" type="GridContainer" parent="CanvasLayer/Inventory" unique_id=412524025]
custom_minimum_size = Vector2(384, 0)
layout_mode = 1
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = 29.0
offset_top = -262.0
offset_right = 413.0
offset_bottom = 262.0
grow_vertical = 2
columns = 2

[node name="InventorySlot" parent="CanvasLayer/Inventory/InventorySlotsContainer" unique_id=1937371880 instance=ExtResource("11_jscy8")]
layout_mode = 2

[node name="InventorySlot2" parent="CanvasLayer/Inventory/InventorySlotsContainer" unique_id=9713004 instance=ExtResource("11_jscy8")]
layout_mode = 2

[node name="InventorySlot3" parent="CanvasLayer/Inventory/InventorySlotsContainer" unique_id=1157528123 instance=ExtResource("11_jscy8")]
layout_mode = 2

[node name="InventorySlot4" parent="CanvasLayer/Inventory/InventorySlotsContainer" unique_id=95824768 instance=ExtResource("11_jscy8")]
layout_mode = 2

[node name="InventorySlot5" parent="CanvasLayer/Inventory/InventorySlotsContainer" unique_id=9589633 instance=ExtResource("11_jscy8")]
layout_mode = 2

[node name="InventorySlot6" parent="CanvasLayer/Inventory/InventorySlotsContainer" unique_id=395172687 instance=ExtResource("11_jscy8")]
layout_mode = 2

[node name="InventorySlot7" parent="CanvasLayer/Inventory/InventorySlotsContainer" unique_id=1525396703 instance=ExtResource("11_jscy8")]
layout_mode = 2

[node name="InventorySlot8" parent="CanvasLayer/Inventory/InventorySlotsContainer" unique_id=2114758886 instance=ExtResource("11_jscy8")]
layout_mode = 2

[node name="World" type="Node2D" parent="." unique_id=1338986842]
position = Vector2(578, 277)

[node name="PlayerCanvas" type="Node2D" parent="World" unique_id=1802187726]
position = Vector2(-243, 156)
scale = Vector2(0.815, 0.815)

[node name="SubViewport" type="SubViewport" parent="World/PlayerCanvas" unique_id=198401340]
transparent_bg = true
size = Vector2i(145, 161)

[node name="Camera2D" type="Camera2D" parent="World/PlayerCanvas/SubViewport" unique_id=1330590879]

[node name="Node2D" type="Node2D" parent="World/PlayerCanvas/SubViewport" unique_id=581199160]
position = Vector2(41.735, 5.34)
rotation = -1.5707964

[node name="Player" parent="World/PlayerCanvas/SubViewport/Node2D" unique_id=1348459066 instance=ExtResource("2_85g3d")]

[node name="MeshInstance2D" type="MeshInstance2D" parent="World/PlayerCanvas" unique_id=1966092071]
position = Vector2(-46.79449, -216.02454)
rotation = 1.5707964
scale = Vector2(0.66, -0.66)
skew = -0.3490659
mesh = SubResource("QuadMesh_choun")
texture = SubResource("ViewportTexture_ya4ey")

[node name="Sprite2D" type="Sprite2D" parent="World/PlayerCanvas" unique_id=1835257113]
material = SubResource("ShaderMaterial_muem4")
position = Vector2(-45.79449, -230.02454)
texture = ExtResource("11_a8y0u")

[node name="Container" type="Node2D" parent="World" unique_id=2058291274]

[node name="Camera2D" type="Camera2D" parent="World" unique_id=1923788347]
zoom = Vector2(0.7, 0.7)

[node name="ObjectsContainer" type="Node2D" parent="World" unique_id=1191763259]
y_sort_enabled = true

[node name="Player" parent="World/ObjectsContainer" unique_id=1966255495 instance=ExtResource("2_85g3d")]
position = Vector2(-252, 154)

[node name="FurnituresContainer" type="Node2D" parent="World/ObjectsContainer" unique_id=2135184305]
y_sort_enabled = true

[node name="chair2" parent="World/ObjectsContainer/FurnituresContainer" unique_id=383685410 instance=ExtResource("9_85g3d")]
position = Vector2(-162, 117)
resource = ExtResource("9_eb6dy")
sprite = ExtResource("9_ya4ey")

[node name="plant" parent="World/ObjectsContainer/FurnituresContainer" unique_id=683898165 instance=ExtResource("9_85g3d")]
position = Vector2(-81, 78)
resource = ExtResource("11_trceg")
sprite = ExtResource("10_eb6dy")

[node name="shelf" parent="World/ObjectsContainer/FurnituresContainer" unique_id=734935164 instance=ExtResource("9_85g3d")]
position = Vector2(4, 195)

[node name="tv" parent="World/ObjectsContainer/FurnituresContainer" unique_id=847094179 instance=ExtResource("9_85g3d")]
position = Vector2(166, 117)
resource = ExtResource("12_dp3eg")
sprite = ExtResource("13_0ld40")

[node name="bed" parent="World/ObjectsContainer/FurnituresContainer" unique_id=1371251334 instance=ExtResource("9_85g3d")]
position = Vector2(0, 40)
resource = ExtResource("14_gqmmt")
sprite = ExtResource("15_yc10j")
